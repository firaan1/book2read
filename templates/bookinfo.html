{% extends "layout.html" %}

{% block title %}
Online Book Review
{% endblock %}

{% block body %}

<h2>Book Info</h2>

</br>
<div class="container">
		<ul class="list-group">
			<li>Title: <a href="/booksearch/{{ book[0] }}">{{ book[2] }}</a></li>
			<li>Author : <a href="/booksearch/{{ book[0] }}/author">{{ book[3] }}</a></li>
			<li>Year : <a href="/booksearch/{{ book[0] }}/year">Year : {{ book[4] }}</a></li>
			<li>ISBN : <a href="/booksearch/{{ book[0]}}">{{ book[1] }}</a></li>
		</ul>

	<form action="{{ url_for('Book', book_id = book[0])}}" method="post">

		<h3> Share Your Ratings</h3>
		<div class="col-md-6">
		<select class="form-group form-control col-sm-3"name="user_rating">
			{% set counts = [1,2,3,4,5] %}
			<option value="{{i}}" selected disabled>Select your rating</option>
			{% for i in counts %}
				<option value="{{i}}">{{i}}</option>
			{% endfor %}
		</select>

		<h4>Your Rating: {% if user_rating %}{{ user_rating }}{% else %}-{% endif %} / 5</h4>

		<h4>Overall Rating: {% if overall_rating %}{{ overall_rating[0] }}{% else %}-{% endif %} / 5 ({% if overall_rating %}{{ overall_rating[1] }}{% else %}0{% endif %})</h4>

		<h4>Goodread rating: {% if gread_rating %}{{ gread_rating['average_rating'] }}{% else %}-{% endif %} / 5 ({% if gread_rating %}{{ gread_rating['ratings_count'] }}{% else %}0{% endif %})</h4>
		<div class="form-group">
			<button name="buttonsrc" value="rate" class="btn btn-info">Rate</button>
		</div>

		</br>

		<h3>Reviews</h3>
		{% if not user_review %}
		<div class="form-group">
			<h4>Share your review</h4>
			<textarea class="form-control" id="user_review" name="user_review" rows="3" cols="50"></textarea>
		</div>
		<div class="form-group">
			<button name="buttonsrc" value="review" class="btn btn-primary">Submit</button>
		</div>
		{% else %}
		<h4>Your Review: </h4>
		<div class="well"rows="3" cols="50">{{ user_review }}</div>
		<div class="form-group pull-right">
			<button name="buttonsrc" value="deletereview" class="btn btn-danger	glyphicon glyphicon-trash "></button>
		</div>
		{% endif %}
		</br>
		{% if overall_reviews %}
		<h4>Total Reviews: {{ overall_reviews | count }}</h4>

	{% for review in overall_reviews %}
		<div class="col-sm-2">
			<div class="thumbnail">
				<img class="img-responsive user-photo" src="https://ssl.gstatic.com/accounts/ui/avatar_2x.png">
			</div>
		</div>
		<div class="col-sm-10">
			<div class="panel panel-default">
				<div class="panel-heading">
					<strong>{{review[0]}}</strong>
				</div>
				<div class="panel-body">
					{{review[1]}}
				</div>
			</div>
		</div>

			{% endfor %}

		{% endif %}
	</form>


{% endblock %}
